### 1. プログラムが「設定ファイルが見つかりません」または「xxxxxはxxxxx APIキーの設定が必要です」と報告しています。どうすれば修正できますか？

これは一般的な設定の問題です。これが発生する理由はいくつかあります：

1. **ファイルの場所または名前が間違っている：**

* プログラムは正確に `config.toml` という名前の設定ファイルを必要とします。誤って `config.toml.txt` と名付けていないことを確認してください。
* このファイルは `config` フォルダー内に配置する必要があります。作業ディレクトリの正しい構造は次のようになります：
  ```
  /── config/
  │   └── config.toml
  └── krillinai.exe（あなたの実行可能ファイル）
  ```
* **Windowsユーザー向け：** 潜在的な権限の問題を避けるために、ソフトウェアのディレクトリ全体をC:ドライブ以外のフォルダーに配置することをお勧めします。

2. **APIキーの設定が不完全：**

* アプリケーションは、大規模言語モデル（翻訳用）、音声サービス（文字起こしおよび音声合成用）、およびTTSサービスのために別々の設定を必要とします。
* OpenAIをすべてに使用する場合でも、`config.toml` ファイルの異なるセクションにキーを入力する必要があります。`llm` セクション、`transcribe` セクション、`tts` セクションを探し、対応するAPIキーやその他の必要な情報を入力してください。

### 2. 「yt-dlpエラー」を含むエラーが表示されます。どうすればよいですか？

このエラーは、通常、ネットワークまたはダウンローダーのバージョンに関連するビデオダウンローダーの問題を示しています。

* **ネットワーク：** プロキシを使用している場合は、`config.toml` ファイル内のプロキシ設定で正しく構成されていることを確認してください。
* **`yt-dlp`の更新：** ソフトウェアにバンドルされている `yt-dlp` のバージョンが古い可能性があります。ソフトウェアの `bin` ディレクトリでターミナルを開き、次のコマンドを実行して手動で更新できます：
  ```
  ./yt-dlp.exe -U
  ```
  
  （異なる場合は、`yt-dlp.exe` をあなたのオペレーティングシステムに適したファイル名に置き換えてください）。

### 3. 最終ビデオの字幕が文字化けしているか、特にLinuxで四角いブロックとして表示されます。

これはほとんど常に、特に中国語の文字をサポートするフォントがシステムに欠けていることが原因です。これを修正するには、必要なフォントをインストールする必要があります。

1. 必要なフォントをダウンロードします。例えば、[Microsoft YaHei](https://modelscope.cn/models/Maranello/KrillinAI_dependency_cn/resolve/master/%E5%AD%97%E4%BD%93/msyh.ttc) と [Microsoft YaHei Bold](https://modelscope.cn/models/Maranello/KrillinAI_dependency_cn/resolve/master/%E5%AD%97%E4%BD%93/msyhbd.ttc)。
2. 新しいフォントディレクトリを作成します： `sudo mkdir -p /usr/share/fonts/msyh`。
3. ダウンロードした `.ttc` フォントファイルをこの新しいディレクトリにコピーします。
4. フォントキャッシュを再構築するために次のコマンドを実行します：
    ```
    cd /usr/share/fonts/msyh
    sudo mkfontscale
    sudo mkfontdir
    sudo fc-cache -fv
    ```

### 4. macOSでアプリケーションが起動せず、「KrillinAIは破損しており、開けません」と表示されます。

これはmacOSのセキュリティ機能であるGatekeeperによって引き起こされ、未確認の開発者からのアプリを制限します。これを修正するには、手動で隔離属性を削除する必要があります。

1. **ターミナル**アプリを開きます。
2. `xattr -cr` コマンドを入力し、スペースを空けてからFinderウィンドウから `KrillinAI.app` ファイルをターミナルにドラッグします。コマンドは次のようになります：
    ```
    xattr -cr /Applications/KrillinAI.app
    ```
3. Enterを押します。これでアプリケーションを開けるようになるはずです。

### 5. 処理中に `ffmpegエラー`、`audioToSrtエラー`、または `exit status 1` のようなエラーが表示されます。

これらのエラーは通常、依存関係やシステムリソースの問題を示しています。

* **`ffmpegエラー`：** これは `ffmpeg` がインストールされていないか、システムのPATHからアクセスできないことを示しています。公式の完全なバージョンの `ffmpeg` がインストールされていることを確認し、その場所がシステムの環境変数に追加されていることを確認してください。
* **`audioToSrtエラー` または `exit status 1`：** このエラーは文字起こしフェーズ（音声からテキストへの変換）中に発生します。一般的な原因は次のとおりです：
  * **モデルの問題：** ローカルの文字起こしモデル（例：`fasterwhisper`）が読み込まれなかったか、ダウンロード中に破損しました。
  * **メモリ不足（RAM）：** ローカルモデルを実行することはリソースを多く消費します。マシンのメモリが不足すると、オペレーティングシステムがプロセスを終了させ、エラーが発生する可能性があります。
  * **ネットワーク障害：** オンライン文字起こしサービス（OpenAIのWhisper APIなど）を使用している場合、これはネットワーク接続の問題または無効なAPIキーを示しています。

### 6. 進行状況バーが動いていません。プログラムはフリーズしていますか？

いいえ、エラーメッセージが表示されない限り、プログラムは動作しています。進行状況バーは、主要なタスク（文字起こしやビデオエンコーディングなど）が完全に完了した後にのみ更新されます。これらのタスクは非常に時間がかかることがあり、進行状況バーが長時間停止しているように見えることがあります。お待ちいただき、タスクが完了するのをお待ちください。

### 7. 私のNVIDIA 5000シリーズGPUは `fasterwhisper` に対応していません。どうすればよいですか？

`fasterwhisper` モデルがNVIDIA 5000シリーズGPUで正しく動作しないことが観察されています（2025年中頃の時点で）。文字起こしのためのいくつかの代替手段があります：

1. **クラウドベースのモデルを使用する：** `config.toml` ファイルで `transcribe.provider.name` を `openai` または `aliyun` に設定します。その後、対応するAPIキーと設定の詳細を入力します。これにより、ローカルモデルの代わりにクラウドプロバイダーのWhisperモデルが使用されます。
2. **別のローカルモデルを使用する：** 元の `whisper.cpp` など、他のローカル文字起こしモデルを試すことができます。

### 8. テキストから音声への変換のための正しい声/トーンコードを見つけて入力するにはどうすればよいですか？

利用可能な声とそれに対応するコードは、使用している音声サービスプロバイダーによって定義されています。公式ドキュメントを参照してください。

* **OpenAI TTS:** [ドキュメント](https://platform.openai.com/docs/guides/text-to-speech/api-reference)（`voice`オプションを参照）。
* **Alibaba Cloud:** [ドキュメント](https://help.aliyun.com/zh/isi/developer-reference/overview-of-speech-synthesis)（トーンリストの `voice` パラメータを参照）。

### 9. Ollamaで実行されているローカル大規模言語モデル（LLM）を翻訳に使用するにはどうすればよいですか？

はい、KrillinAIをOpenAI互換のAPIエンドポイントを提供する任意のローカルLLMを使用するように構成できます。

1. **ローカルLLMを起動する：** ローカルサービス（例：Ollamaで実行されているLlama3）がアクティブでアクセス可能であることを確認します。
2. **`config.toml`を編集する：** 大規模言語モデル（翻訳者）のセクションで：

* プロバイダーの `name`（または `type`）を `"openai"` に設定します。
* `api_key` を任意のランダムな文字列（例：`"ollama"`）に設定します。これはローカル呼び出しには必要ありません。
* `base_url` をローカルモデルのAPIエンドポイントに設定します。Ollamaの場合、通常は `http://localhost:11434/v1` です。
* `model` を提供しているモデルの名前（例：`"llama3"`）に設定します。

### 10. 最終ビデオの字幕スタイル（フォント、サイズ、色）をカスタマイズできますか？

いいえ。現在、KrillinAIは**ハードコーディングされた字幕**を生成します。つまり、字幕はビデオフレームに直接焼き付けられています。アプリケーションは**字幕スタイルをカスタマイズするオプションを提供していません**。プリセットスタイルを使用します。

高度なカスタマイズのための推奨される回避策は次のとおりです：

1. KrillinAIを使用して翻訳された `.srt` 字幕ファイルを生成します。
2. 元のビデオとこの `.srt` ファイルをプロフェッショナルなビデオ編集ソフトウェア（例：Premiere Pro、Final Cut Pro、DaVinci Resolve）にインポートして、カスタムスタイルを適用してからレンダリングします。

### 11. すでに翻訳された `.srt` ファイルがあります。KrillinAIはそれを使用してダビングだけを行えますか？

いいえ、この機能は現在サポートされていません。アプリケーションは文字起こしから最終ビデオ生成までのフルパイプラインを実行します。